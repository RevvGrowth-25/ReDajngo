{% extends 'base.html' %}

{% block title %}December Strategy & Performance{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8">

    <div class="flex justify-center mb-6 sticky top-4 z-50">
        <div class="bg-white/90 backdrop-blur shadow-lg border border-gray-200 p-1.5 rounded-2xl inline-flex relative">
            <button onclick="switchTab('strategy')" id="btn-strategy" class="relative px-8 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 bg-blue-50 text-brand-600 shadow-sm ring-1 ring-black/5">
                <i class="fas fa-map-marked-alt"></i>
                <span>The Plan (Strategy)</span>
            </button>
            <button onclick="switchTab('execution')" id="btn-execution" class="relative px-8 py-2.5 rounded-xl text-sm font-bold text-gray-500 hover:text-gray-800 transition-all duration-300 flex items-center gap-2">
                <i class="fas fa-chart-line"></i>
                <span>The Reality (Data)</span>
            </button>
        </div>
    </div>

    <div id="tab-strategy" class="tab-content transition-all duration-500 ease-in-out transform translate-x-0 opacity-100">

        <div class="relative overflow-hidden rounded-3xl bg-slate-900 text-white shadow-2xl p-8 lg:p-12 mb-8">
            <div class="absolute top-0 right-0 w-[500px] h-[500px] bg-brand-600 rounded-full mix-blend-overlay filter blur-[100px] opacity-20 -mr-32 -mt-32 animate-pulse"></div>
            <div class="absolute bottom-0 left-0 w-[300px] h-[300px] bg-accent-600 rounded-full mix-blend-overlay filter blur-[80px] opacity-20 -ml-10 -mb-10"></div>

            <div class="relative z-10 flex flex-col md:flex-row justify-between items-end gap-6">
                <div class="max-w-3xl">
                    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-brand-500/20 border border-brand-500/30 text-brand-300 text-xs font-bold uppercase tracking-widest mb-4">
                        <span class="w-2 h-2 rounded-full bg-brand-400 animate-ping"></span>
                        Strategic Roadmap
                    </div>
                    <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight mb-4 bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent">
                        Operation: Scale & Stabilize
                    </h1>
                    <p class="text-slate-300 text-lg leading-relaxed max-w-2xl">
                        The December mandate: Deploy high-impact automations while fortifying the ecosystem with robust monitoring and documentation.
                    </p>
                </div>
                <div class="hidden md:block text-right">
                    <div class="text-6xl font-black text-white/10 select-none">DEC</div>
                    <div class="text-2xl font-bold text-white/40 -mt-4">2025</div>
                </div>
            </div>
        </div>

        <div class="card bg-white rounded-2xl p-8 shadow-sm border border-gray-100 mb-8">
            <div class="text-center mb-10">
                <h2 class="text-2xl font-bold text-gray-800">Weekly Execution Timeline</h2>
                <p class="text-sm text-gray-500">The tactical path to completion</p>
            </div>
            <div class="relative">
                <div class="hidden lg:block absolute top-1/2 left-0 w-full h-1 bg-gray-100 -translate-y-1/2 rounded-full z-0"></div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 relative z-10">
                    <div class="relative group cursor-default">
                        <div class="bg-white p-6 rounded-2xl border-2 border-blue-100 shadow-sm hover:border-blue-500 transition-all duration-300 text-center">
                            <div class="w-14 h-14 mx-auto bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center text-2xl mb-4"><i class="fas fa-hammer"></i></div>
                            <div class="absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-blue-600 text-white text-[10px] font-bold rounded-full uppercase tracking-wider">Week 01</div>
                            <h3 class="font-bold text-gray-800 text-lg mb-1">Build Phase</h3>
                            <p class="text-xs text-gray-500">Core Development</p>
                        </div>
                    </div>
                    <div class="relative group cursor-default">
                        <div class="bg-white p-6 rounded-2xl border-2 border-indigo-100 shadow-sm hover:border-indigo-500 transition-all duration-300 text-center">
                            <div class="w-14 h-14 mx-auto bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center text-2xl mb-4"><i class="fas fa-handshake"></i></div>
                            <div class="absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-indigo-600 text-white text-[10px] font-bold rounded-full uppercase tracking-wider">Week 02</div>
                            <h3 class="font-bold text-gray-800 text-lg mb-1">Handover</h3>
                            <p class="text-xs text-gray-500">Team Integration</p>
                        </div>
                    </div>
                    <div class="relative group cursor-default">
                        <div class="bg-white p-6 rounded-2xl border-2 border-purple-100 shadow-sm hover:border-purple-500 transition-all duration-300 text-center">
                            <div class="w-14 h-14 mx-auto bg-purple-50 text-purple-600 rounded-2xl flex items-center justify-center text-2xl mb-4"><i class="fas fa-shield-alt"></i></div>
                            <div class="absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-purple-600 text-white text-[10px] font-bold rounded-full uppercase tracking-wider">Week 03</div>
                            <h3 class="font-bold text-gray-800 text-lg mb-1">Stabilize</h3>
                            <p class="text-xs text-gray-500">Optimization</p>
                        </div>
                    </div>
                    <div class="relative group cursor-default">
                        <div class="bg-white p-6 rounded-2xl border-2 border-pink-100 shadow-sm hover:border-pink-500 transition-all duration-300 text-center">
                            <div class="w-14 h-14 mx-auto bg-pink-50 text-pink-600 rounded-2xl flex items-center justify-center text-2xl mb-4"><i class="fas fa-book"></i></div>
                            <div class="absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-pink-600 text-white text-[10px] font-bold rounded-full uppercase tracking-wider">Week 04</div>
                            <h3 class="font-bold text-gray-800 text-lg mb-1">Knowledge</h3>
                            <p class="text-xs text-gray-500">Documentation</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
            <div class="card bg-white rounded-2xl p-6 shadow-sm border border-gray-100 lg:col-span-1 flex flex-col">
                <h3 class="text-lg font-bold text-gray-800 mb-2">Planned Allocation</h3>
                <div class="flex-1 flex items-center justify-center relative">
                    <canvas id="focusChart"></canvas>
                </div>
            </div>

            <div class="card bg-white rounded-2xl p-6 shadow-sm border border-gray-100 lg:col-span-2">
                <h3 class="text-lg font-bold text-gray-800 mb-6 flex items-center gap-2">
                    <i class="fas fa-bullseye text-green-500"></i> Success Targets
                </h3>
                <div class="space-y-6">
                    <div>
                        <div class="flex justify-between items-end mb-1">
                            <span class="text-sm font-bold text-gray-700">Automation Deployment</span>
                            <span class="text-sm font-bold text-brand-600">Target: 4+ Flows</span>
                        </div>
                        <div class="w-full bg-gray-100 rounded-full h-3">
                            <div class="bg-gradient-to-r from-brand-400 to-brand-600 h-3 rounded-full" style="width: 80%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between items-end mb-1">
                            <span class="text-sm font-bold text-gray-700">System Reliability</span>
                            <span class="text-sm font-bold text-green-600">Target: 99% Uptime</span>
                        </div>
                        <div class="w-full bg-gray-100 rounded-full h-3">
                            <div class="bg-gradient-to-r from-green-400 to-green-600 h-3 rounded-full" style="width: 99%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between items-end mb-1">
                            <span class="text-sm font-bold text-gray-700">R&D Hours</span>
                            <span class="text-sm font-bold text-purple-600">Target: 10 Hours</span>
                        </div>
                        <div class="w-full bg-gray-100 rounded-full h-3">
                            <div class="bg-gradient-to-r from-purple-400 to-purple-600 h-3 rounded-full" style="width: 60%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="tab-execution" class="tab-content hidden opacity-0 transition-all duration-500 ease-in-out transform translate-x-4">

        <div class="bg-white rounded-3xl shadow-sm border border-gray-100 p-8 mb-8 flex flex-col md:flex-row justify-between items-center gap-6">
            <div>
                <h2 class="text-3xl font-extrabold text-gray-900 tracking-tight">Performance Analytics</h2>
                <p class="text-gray-500 mt-1">Quantitative analysis of Weeks 1-3 deliverables.</p>
            </div>
            <div class="flex gap-4">
                <div class="text-center px-4 py-2 bg-green-50 rounded-xl border border-green-100">
                    <div class="text-2xl font-black text-green-600">125%</div>
                    <div class="text-[10px] font-bold text-green-800 uppercase">Build Target</div>
                </div>
                <div class="text-center px-4 py-2 bg-blue-50 rounded-xl border border-blue-100">
                    <div class="text-2xl font-black text-blue-600">32</div>
                    <div class="text-[10px] font-bold text-blue-800 uppercase">Total Tasks</div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">

            <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100 relative overflow-hidden">
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <h3 class="text-lg font-bold text-gray-800">Weekly Task Velocity</h3>
                        <p class="text-xs text-gray-400">Items completed per sprint week</p>
                    </div>
                    <span class="p-2 bg-gray-50 rounded-lg text-gray-400"><i class="fas fa-chart-bar"></i></span>
                </div>
                <div class="h-[300px] w-full">
                    <canvas id="velocityChart"></canvas>
                </div>
            </div>

            <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100 relative overflow-hidden">
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <h3 class="text-lg font-bold text-gray-800">Actual Resource Allocation</h3>
                        <p class="text-xs text-gray-400">Where the hours actually went</p>
                    </div>
                    <span class="p-2 bg-gray-50 rounded-lg text-gray-400"><i class="fas fa-chart-pie"></i></span>
                </div>
                <div class="h-[300px] w-full flex items-center justify-center">
                    <canvas id="effortChart"></canvas>
                </div>
            </div>
        </div>

        <h3 class="text-xl font-bold text-gray-800 mb-4 px-2">Operational Metrics</h3>
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8">
            <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:-translate-y-1 transition-transform">
                <div class="text-xs text-gray-400 font-bold uppercase mb-2">Automations</div>
                <div class="text-3xl font-black text-blue-600">5</div>
                <div class="text-[10px] text-green-500 font-bold mt-1">+1 vs Plan</div>
            </div>
            <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:-translate-y-1 transition-transform">
                <div class="text-xs text-gray-400 font-bold uppercase mb-2">Tools Tested</div>
                <div class="text-3xl font-black text-purple-600">14</div>
                <div class="text-[10px] text-gray-500 font-bold mt-1">Across 3 Weeks</div>
            </div>
            <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:-translate-y-1 transition-transform">
                <div class="text-xs text-gray-400 font-bold uppercase mb-2">API Endpoints</div>
                <div class="text-3xl font-black text-orange-500">8</div>
                <div class="text-[10px] text-gray-500 font-bold mt-1">Integrated</div>
            </div>
            <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:-translate-y-1 transition-transform">
                <div class="text-xs text-gray-400 font-bold uppercase mb-2">Coordination</div>
                <div class="text-3xl font-black text-teal-600">18</div>
                <div class="text-[10px] text-gray-500 font-bold mt-1">Sync Calls</div>
            </div>
            <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:-translate-y-1 transition-transform">
                <div class="text-xs text-gray-400 font-bold uppercase mb-2">Major Pivots</div>
                <div class="text-3xl font-black text-red-500">1</div>
                <div class="text-[10px] text-gray-500 font-bold mt-1">AI Interviewer</div>
            </div>
             <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:-translate-y-1 transition-transform">
                <div class="text-xs text-gray-400 font-bold uppercase mb-2">Team Uptime</div>
                <div class="text-3xl font-black text-slate-700">100%</div>
                <div class="text-[10px] text-gray-500 font-bold mt-1">No Outages</div>
            </div>
        </div>

        <div class="bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden">
             <div class="px-6 py-4 border-b border-gray-100 bg-gray-50">
                <h3 class="font-bold text-gray-700">Delivery Log</h3>
            </div>
            <table class="w-full text-sm text-left">
                <thead class="text-xs text-gray-500 uppercase bg-gray-50 border-b border-gray-100">
                    <tr>
                        <th class="px-6 py-3">Week</th>
                        <th class="px-6 py-3">Core Deliverable</th>
                        <th class="px-6 py-3">Status</th>
                        <th class="px-6 py-3">Impact</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-100">
                    <tr class="hover:bg-gray-50/50">
                        <td class="px-6 py-4 font-medium text-gray-900">Week 01</td>
                        <td class="px-6 py-4">AI Team Dashboard & Follow-up Auto</td>
                        <td class="px-6 py-4"><span class="px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-bold">Live</span></td>
                        <td class="px-6 py-4 text-gray-500">Centralized tracking</td>
                    </tr>
                    <tr class="hover:bg-gray-50/50">
                        <td class="px-6 py-4 font-medium text-gray-900">Week 01</td>
                        <td class="px-6 py-4">LinkedIn Agent v2</td>
                        <td class="px-6 py-4"><span class="px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-bold">Live</span></td>
                        <td class="px-6 py-4 text-gray-500">Improved logic</td>
                    </tr>
                    <tr class="hover:bg-gray-50/50">
                        <td class="px-6 py-4 font-medium text-gray-900">Week 02</td>
                        <td class="px-6 py-4">Interview Analyzer</td>
                        <td class="px-6 py-4"><span class="px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-bold">In Review</span></td>
                        <td class="px-6 py-4 text-gray-500">Recruitment efficiency</td>
                    </tr>
                    <tr class="hover:bg-gray-50/50">
                        <td class="px-6 py-4 font-medium text-gray-900">Week 02</td>
                        <td class="px-6 py-4">AI Interviewer Prototype</td>
                        <td class="px-6 py-4"><span class="px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-bold">Shelved</span></td>
                        <td class="px-6 py-4 text-gray-500">Feasibility test failed</td>
                    </tr>
                    <tr class="hover:bg-gray-50/50">
                        <td class="px-6 py-4 font-medium text-gray-900">Week 03</td>
                        <td class="px-6 py-4">Everstage Blog Gen (Cloud/Make)</td>
                        <td class="px-6 py-4"><span class="px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-bold">Live</span></td>
                        <td class="px-6 py-4 text-gray-500">Content scaling</td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>

</div>
{% endblock %}

{% block extra_js %}
<script>
    Chart.defaults.font.family = 'Inter';
    Chart.defaults.color = '#64748b';

    // --- Tab Switching Logic ---
    function switchTab(tabName) {
        const strategyContent = document.getElementById('tab-strategy');
        const executionContent = document.getElementById('tab-execution');
        const btnStrategy = document.getElementById('btn-strategy');
        const btnExecution = document.getElementById('btn-execution');

        if (tabName === 'strategy') {
            // Show Strategy
            strategyContent.classList.remove('hidden');
            setTimeout(() => {
                strategyContent.classList.remove('opacity-0');
                strategyContent.classList.remove('translate-x-4'); // Reset position
            }, 10);

            // Hide Execution
            executionContent.classList.add('opacity-0');
            executionContent.classList.add('translate-x-4');
            setTimeout(() => executionContent.classList.add('hidden'), 300);

            // Active State: Strategy
            btnStrategy.className = "relative px-8 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 bg-blue-50 text-brand-600 shadow-sm ring-1 ring-black/5";
            btnExecution.className = "relative px-8 py-2.5 rounded-xl text-sm font-bold text-gray-500 hover:text-gray-800 transition-all duration-300 flex items-center gap-2";

        } else {
            // Show Execution
            executionContent.classList.remove('hidden');
            setTimeout(() => {
                executionContent.classList.remove('opacity-0');
                executionContent.classList.remove('translate-x-4');
            }, 10);

            // Hide Strategy
            strategyContent.classList.add('opacity-0');
            strategyContent.classList.add('-translate-x-4');
            setTimeout(() => strategyContent.classList.add('hidden'), 300);

            // Active State: Execution
            btnExecution.className = "relative px-8 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 bg-green-50 text-green-700 shadow-sm ring-1 ring-black/5";
            btnStrategy.className = "relative px-8 py-2.5 rounded-xl text-sm font-bold text-gray-500 hover:text-gray-800 transition-all duration-300 flex items-center gap-2";
        }
    }

    document.addEventListener('DOMContentLoaded', function() {

        // 1. STRATEGY CHART (TAB 1)
        const ctxFocus = document.getElementById('focusChart');
        if (ctxFocus) {
            new Chart(ctxFocus.getContext('2d'), {
                type: 'polarArea',
                data: {
                    labels: ['Builds', 'Optimize', 'Monitor', 'Docs'],
                    datasets: [{
                        data: [40, 25, 15, 20],
                        backgroundColor: [
                            'rgba(14, 165, 233, 0.6)',
                            'rgba(168, 85, 247, 0.6)',
                            'rgba(34, 197, 94, 0.6)',
                            'rgba(236, 72, 153, 0.6)'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { r: { ticks: { display: false }, grid: { color: '#f1f5f9' } } },
                    plugins: { legend: { position: 'right' } }
                }
            });
        }

        // 2. VELOCITY CHART (TAB 2)
        const ctxVelocity = document.getElementById('velocityChart');
        if (ctxVelocity) {
            new Chart(ctxVelocity.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3'],
                    datasets: [
                        {
                            label: 'New Builds',
                            data: [3, 4, 3], // Based on your logs
                            backgroundColor: '#3b82f6',
                            borderRadius: 6,
                        },
                        {
                            label: 'R&D / Experiments',
                            data: [5, 4, 3], // Based on your logs
                            backgroundColor: '#a855f7',
                            borderRadius: 6,
                        },
                         {
                            label: 'Calls & Syncs',
                            data: [6, 4, 3], // Based on your logs
                            backgroundColor: '#f59e0b',
                            borderRadius: 6,
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, grid: { borderDash: [2, 2] } },
                        x: { grid: { display: false } }
                    },
                    plugins: { legend: { position: 'bottom' } }
                }
            });
        }

        // 3. EFFORT CHART (TAB 2)
        const ctxEffort = document.getElementById('effortChart');
        if (ctxEffort) {
            new Chart(ctxEffort.getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: ['Actual Builds', 'Research', 'Ops/Calls', 'Pivots'],
                    datasets: [{
                        data: [42, 33, 20, 5],
                        backgroundColor: [
                            '#0ea5e9', // Blue
                            '#8b5cf6', // Purple
                            '#64748b', // Slate
                            '#ef4444'  // Red
                        ],
                        hoverOffset: 10,
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '75%',
                    plugins: {
                        legend: { position: 'right', labels: { usePointStyle: true, padding: 20 } }
                    }
                }
            });
        }
    });
</script>
{% endblock %}
